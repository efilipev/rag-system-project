---
apiVersion: v1
kind: ConfigMap
metadata:
  name: rag-app-config
  namespace: rag-system
  labels:
    app: rag-backend
data:
  # Logging
  LOG_LEVEL: "INFO"

  # Embedding Configuration
  EMBEDDING_MODEL: "sentence-transformers/all-MiniLM-L6-v2"
  VECTOR_DIMENSION: "384"

  # Database
  POSTGRES_DB: "ragdb"
  POSTGRES_HOST: "postgres-service"
  POSTGRES_PORT: "5432"

  # Redis
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_DB: "0"

  # RabbitMQ
  RABBITMQ_HOST: "rabbitmq-service"
  RABBITMQ_PORT: "5672"

  # Qdrant
  QDRANT_HOST: "qdrant-service"
  QDRANT_PORT: "6333"

  # MinIO
  MINIO_ENDPOINT: "minio-service:9000"
  MINIO_BUCKET: "documents"

  # Service URLs
  QUERY_ANALYSIS_URL: "http://query-analysis-service:8101"
  DOCUMENT_RETRIEVAL_URL: "http://document-retrieval-service:8102"
  DOCUMENT_RANKING_URL: "http://document-ranking-service:8103"
  LATEX_PARSER_URL: "http://latex-parser-service:8104"
  LLM_GENERATION_URL: "http://llm-generation-service:8105"
  RESPONSE_FORMATTER_URL: "http://response-formatter-service:8106"

  # Security
  ENABLE_AUTHENTICATION: "true"
  ENABLE_RATE_LIMITING: "true"
  ENABLE_SECURITY_HEADERS: "true"

  # CORS
  CORS_ALLOWED_ORIGINS: '["https://app.example.com"]'
  CORS_ALLOW_CREDENTIALS: "true"

  # JWT
  JWT_ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "30"
  REFRESH_TOKEN_EXPIRE_DAYS: "7"

  # Rate Limiting
  RATE_LIMIT_REQUESTS_PER_MINUTE: "60"
  RATE_LIMIT_BURST: "10"

  # LLM Configuration
  LLM_PROVIDER: "openai"
  DEFAULT_MODEL: "gpt-3.5-turbo"
  LLM_MAX_TOKENS: "2000"
  LLM_TEMPERATURE: "0.7"

  # Ranking
  RANKER_TYPE: "cross-encoder"
  CROSS_ENCODER_DEVICE: "cpu"
